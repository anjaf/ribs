<style>
    p {
        text-align: justify;
    }

    .opt {
        font-style: italic;
        color: #aaaaaa;
    }

    .api {
        font-family: Consolas, monospace, 'Courier New';
        font-size: 10pt;
    }

    dl dt {
        font-weight: bold;
        font-size: 100%;
    }

    dt:before {
        font-family: 'EBI-Generic';
        content: 'i';
        margin-right: 10pt;
    }
</style>

<div class="callout">
    <h4>ArrayExpress Help</h4>
    This help page is for the BioStudies
    version of the ArrayExpress collection. <a href="https://www.ebi.ac.uk/arrayexpress/help/index.html" target="_blank">Click
    here to view the
    current version of ArrayExpress help page.</a>
</div>

<h3>ArrayExpress to BioStudies API Migration Guide</h3>
<p>We are in the process of migrating ArrayExpress to BioStudies as a collection. As a result, there would be some changes
    in the API support for ArrayExpress. Until announced, the current version of the API will continue to work. Some of
    the major changes are: </p>
<dl>
    <dt>XML <i class="fas fa-arrow-right"></i> JSON</dt>
    <dd>XML API responses are being deprecated in favour of JSON. However, XML representation is available for
        individual experiments in a more general <a target="_blank" href="https://europepmc.org/articles/PMC5753238">
            PageTab schema</a>. We encourage you to shift to the new JSON schema which should have all the information
        available in the current AE JSON.
    </dd>

    <dt>Response bundling</dt>
    <dd>Search API will return a paged response containing only the metadata about the experiments.
        Results would not be bundled and you'll have to iterate through the set and request each experiment
        individually.
    </dd>

    <dt>Endpoint changes</dt>
    <dd>The endpoint has changed from <code>https://www.ebi.ac.uk/arrayexpress/xml/v3</code> to
        <code>https://www.ebi.ac.uk/biostudies/api/v1</code>. A list of all searchable fields and their
        BioStudies equivalent is given below. These fields are in addition to the
        <a href="../help#rest-api-docs">default BioStudies search criteria fields</a>.
        Please send all questions and feedback to <a href="mailto://biostudies@ebi.ac.uk">biostudies@ebi.ac.uk</a>.
        </p>
    </dd>

</dl>
<table>
    <thead>
    <tr>
        <th>Old Field&nbsp;name</th>
        <th>New Field&nbsp;name</th>
        <th>What is searched?</th>
        <th>ArrayExpress Example</th>
        <th>BioStudies URL</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>accession</td>
        <td></td>
        <td>Experiment primary ArrayExpress or secondary (GEO, ENA, EGA etc) accession</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?accession=E-MEXP-31</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/studies/E-MEXP-31</td>
    </tr>
    <tr>
        <td>array</td>
        <td>TBD</td>
        <td>Array design accession or name (wildcards supported)</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/files?array=A-AFFY-33</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/files/A-AFFY-33
            <a data-open="files-help"><i class="fa fa-info-circle"></i></a>
        </td>
    </tr>
    <tr>
        <td>expdesign</td>
        <td>experimental_design</td>
        <td>Experiment design type, related to the questions being addressed by the study, e.g. "time series design",
            "stimulus or stress design", "genetic modification design". Has EFO expansion.
        </td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/files?expdesign=dose+response</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?experimental_design="dose response"</td>
    </tr>
    <tr>
        <td>exptype</td>
        <td>study_type</td>
        <td>Experiment type, related to the assay technology used. <a href="experiment_types.html">List of experiment
            types in ArrayExpress</a>. Has EFO expansion.
        </td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?exptype="RNA-seq of non coding RNA"</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?study_type="RNA-seq of non coding RNA"</td>
    </tr>
    <tr>
        <td>ef/ev</td>
        <td>experimental_factor</td>
        <td>Experimental factor (also called experimental variable), the name of the main variable under study in an
            experiment. E.g. if the factor is "sex" in a human study, the researchers would be comparing between male
            and female samples, and "sex" is not merely an attribute the samples happen to have. Has EFO expansion.
        </td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?ef="cell type"</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?experimental_factor="cell type"</td>
    </tr>
    <tr>
        <td>efv/evv</td>
        <td>experimental_factor_value</td>
        <td>The value of an experimental factor. E.g. The values for "genotype" factor can be "wild type genotype",
            "p53-/-". Has EFO expansion.
        </td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?efv=HeLa</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?experimental_factor_value=HeLa</td>
    </tr>
    <tr>
        <td>sa</td>
        <td>source_characteristics</td>
        <td>Sample attribute values, e.g. "male", "liver". Has EFO expansion.</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/files?sa=fibroblast</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?source_characteristics=fibroblast</td>
    </tr>
    <tr>
        <td>sac</td>
        <td>source_characteristics_value</td>
        <td>Sample attribute category that is defined in an experiment, e.g. "age", "cell type", "disease". Has EFO
            expansion.
        </td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/files?sac=age</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?source_characteristics_value=age</td>
    </tr>
    <tr>
        <td>species</td>
        <td>organism</td>
        <td>Species of the samples. Can use common name (e.g. "mouse") or binomial nomenclature/Latin names (e.g. "Mus
            musculus"). Has EFO expansion.
        </td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?species="homo sapiens"</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?organism="homo sapien"</td>
    </tr>
    <tr>
        <td>pmid</td>
        <td></td>
        <td>PubMed identifier</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?pmid=16553887</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?link_type=pmid&link_value=16553887</td>
    </tr>
    <tr>
        <td>gxa</td>
        <td>gxa</td>
        <td>Presence ("true") / absence ("false") of an ArrayExpress experiment in the <a href="/gxa">Expression
            Atlas</a>.
        </td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?gxa=true</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?gxa=true</td>
    </tr>
    <tr>
        <td>directsub</td>
        <td></td>
        <td>If "true" only returns experiments directly submitted to ArrayExpress (i.e. not imported from GEO). For more
            information about how we import data from GEO see the <a href="GEO_data.html">GEO data help page</a>.
        </td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?directsub=true</td>
        <td>TBD</td>
    </tr>
    <tr>
        <td>raw</td>
        <td>raw</td>
        <td>Experiment has raw data available.</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?raw=true</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?raw=true</td>
    </tr>
    <tr>
        <td>processed</td>
        <td>processed</td>
        <td>Experiment has processed data available.</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?processed=true</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?processed=true</td>
    </tr>
    </tr>
    <tr>
        <td>assaycount</td>
        <td>assay_count</td>
        <td>The number of of assays where x &lt;= y and both values are between 0 and 99,999 (<strong>inclusive</strong>).
            To count <strong>excluding</strong> the values given use curly brackets e.g. assaycount={1 TO 5} will find
            experiments with 2-4 assays. Single numbers may also be given e.g. assaycount=10 will find experiments with
            10 assays.
        </td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?assaycount=[1 TO 5]</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?assay_count=[1 TO 5]
            <a data-open="range-help"><i class="fa fa-info-circle"></i></a>
        </td>
    </tr>
    <tr>
        <td>samplecount</td>
        <td>sample_count</td>
        <td>The number of samples</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?samplecount=[1 TO 5]</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?sample_count=[1 TO 5]
            <a data-open="range-help"><i class="fa fa-info-circle"></i></a>
        </td>
    </tr>
    <tr>
        <td>efcount</td>
        <td>experimental_factor_count</td>
        <td>The number of experimental factors</td>
        <td>https://www.ebi.ac.uk/arrayexpressxml/v3/experiments?efcount=[1 TO 5]</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?experimental_factor_count=[1 TO 5]
            <a data-open="range-help"><i class="fa fa-info-circle"></i></a>
        </td>
    </tr>
    <tr>
        <td>sacount</td>
        <td></td>
        <td>The number of sample attribute categories</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?sacount=[1 TO 5]</td>
        <td>deprecated</td>
    </tr>
    <tr>
        <td>miamescore</td>
        <td>miame_score</td>
        <td>The <a href="http://fged.org/projects/miame/">MIAME</a> compliance score (maximum score is 5)</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?miamescore=[1 TO 5]</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?miame_score=[1 TO 5]
            <a data-open="range-help"><i class="fa fa-info-circle"></i></a>
        </td>
    </tr>
    <tr>
        <td>minseqe</td>
        <td>minseqe_score</td>
        <td>The <a href="http://www.fged.org/projects/minseqe/">MINSEQE</a> compliance score (maximum score is 5)</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?minseqescore=[1 TO 5]</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?minseqe_score=[1 TO 5]
            <a data-open="range-help"><i class="fa fa-info-circle"></i></a>
        </td>
    </tr>
    <tr>
        <td>date</td>
        <td></td>
        <td>The release date of the experiment. Format is [YYYY-MM-DD]. Wildcards supported. For example:<br>
            <code>date=2009-12-01</code> will search for experiments released on 1st of Dec 2009.<br>
            <code>date=2009*</code> will search for experiments released in 2009.<br>
            <code>date=[2008-01-01 2008-05-31]</code> will search for experiments released between 1st of Jan and end of
            May 2008.
        </td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/experiments?date=[2008-01-01 2008-05-31]</td>
        <td class="api"><span class="opt">&lt;endpoint&gt;</span>/search?release_date=[2008-01-01 TO 2008-05-31]
            <a data-open="range-help"><i class="fa fa-info-circle"></i></a>
        </td>
    </tr>
    </tbody>
</table>
<div class="reveal" id="files-help" data-reveal>
    <h4><i class="fa fa-info-circle"></i> POST works too!</h4>
    <p>In some cases, the request header length is quite large which generates a <span class="api">400</span> HTTP
        response status codes. To avoid this, please use a <span class="api">POST</span> request.</p>
    <button class="close-button" data-close aria-label="Close modal" type="button">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="reveal" id="range-help" data-reveal>
    <h4><i class="fa fa-info-circle"></i> Encode your requests! </h4>
    <p>As per the <a href="https://tools.ietf.org/html/rfc3986#section-2.2" target="_blank">HTTP standard</a>, square
        brackets (<span class="api">[</span> and <span class="api">]</span>)  are reserved characters. All range
        requests thus need to be URL encoded to get the correct results. For example,
        <span class="api">/search?sample_count=[1 TO 5]</span> needs to be encoded as
        <span class="api">/search?sample_count=%5B1%20TO%205%5D</span>.</p>
    <button class="close-button" data-close aria-label="Close modal" type="button">
        <span aria-hidden="true">&times;</span>
    </button>
</div>

